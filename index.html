<html>
    <head>
        <title>数値解析入門</title>
        <!--MathJaxの設定-->
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });
          </script>
          <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
          </script>
          <meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
        <link rel="stylesheet" type="text/css" href="css/style.css"> 
    </head>
    
    <body class="NA_contents">
        <main style="width: 75%;padding-left: 3%;padding-right: 3%;" >
        <!--タイトル-->
        <h1 style="text-align: center;color: rgb(0, 61, 111);padding-top: 10px;">
            数値計算入門 / 貯留層解析基礎 講座
        </h1>
            <!--スケジュール-->
            <h2 style="border-bottom: solid rgb(0, 61, 111);">
                1.スケジュール
            </h2>
                各自Python<s>かMATLAB</s>を利用できるノートパソコンを持参のこと。環境構築が難しい場合はGoogleアカウントを作成しておけば大丈夫です。
                <br>
                <br>
                <center>
                <table border="1">
                <!--
                <tr align="center">
                    <td>第xx回</td>
                    <td>xx月xx日</td>
                    <td>Location</td>
                    <td>xx:xx-xx:xx</td>
                    <td>Theme</td>
                </tr>
                -->
                    <tr align="center">
                        <th>回数</th>
                        <th>日付</th>
                        <th>場所</th>
                        <th>時間</th>
                        <th>テーマ</th>
                    </tr>

                    <tr align="center">
                        <td>第01回</td>
                        <td>04月11日</td>
                        <td>W2-544</td>
                        <td>10:30-11:30</td>
                        <td>常微分方程式の時間積分</td>
                    </tr>
                    
                    <tr align="center">
                        <td>第02回</td>
                        <td>04月11日</td>
                        <td>W2-544</td>
                        <td>13:00-14:00</td>
                        <td>1次元移流方程式（差分法）</td>
                    </tr>

                    <tr align="center">
                        <td>第03回</td>
                        <td>04月12日</td>
                        <td>W2-544</td>
                        <td>13:00-15:30</td>
                        <td>1次元拡散方程式（陽解法・有限体積法）</td>
                    </tr>

                    <tr align="center">
                        <td>第04回</td>
                        <td>04月12日</td>
                        <td>W2-544</td>
                        <td>16:00-17:30</td>
                        <td>貯留層解析と陰解法の導入</td>
                    </tr>

                    <tr align="center">
                        <td>第05回</td>
                        <td>02月16日</td>
                        <td>未定</td>
                        <td>11:00-12:00</td>
                        <td>陰解法と疎行列</td>
                    </tr>

                    <tr align="center">
                        <td>第06回</td>
                        <td>02月16日</td>
                        <td>未定</td>
                        <td>13:00-13:30</td>
                        <td>相対浸透率と関数プログラミング</td>
                    </tr>

                    <tr align="center">
                        <td>第07回</td>
                        <td>02月16日</td>
                        <td>未定</td>
                        <td>13:45-16:15</td>
                        <td>多相流解析と実践プロジェクト</td>
                    </tr>

                    <tr align="center">
                        <td>第08回</td>
                        <td>02月16日</td>
                        <td>未定</td>
                        <td>16:30-17:30</td>
                        <td>まとめと引継ぎ</td>
                    </tr>

                    </table>
                </center>
            <br>
               

            <!--コンテンツはじまり-->
            <h2 style="border-bottom: solid rgb(0, 61, 111);">
                2.コンテンツ
            </h2>
            パワーポイントのまとめは<a href="pptx.html"><b><u><font color="#ff4500">こちら</font></u></b></a>

                    <!--環境構築編-->
                    <h3>
                        2-1.環境構築
                    </h3>
                    <!--事前に確認しておくとスムーズ-->
                    <ul>
                        <li>Jupyter Notebookは使えるか？→ダメならGoolgeColab</li>
                        <li>参加者のOSは？</li>
                        <li>Fortranとgfortran</li>
                        <li>基本的なターミナル操作</li>
                    </ul>

                    <!--数値計算法-->
                    <h3>
                        2-2.数値計算入門
                    </h3>
                    基礎編の資料をまとめたzipは<a><b><u><font color="#ff4500">こちら</font></u></b></a>
                    <div>
                        <!--
                        このセクションでは，離散化の考え方と数値解析の注意点（安定条件）がメインテーマ。実施時間の目安は目安3.5h~4hと思われる。なお，<b>常微分方程式の時間積分（発展）</b>は飛ばしても構わない。
                        -->
                    <ul>
                        <li><a href="kiso/01_ODEa.pdf">常微分方程式の時間積分（基礎）</a>
                            ：演習用
                                <a href="kiso/小球の自由落下.xlsx">[excel]</a>, 
                                <a href="kiso/freefall.py">[python]</a>, 
                                <a href="kiso/freefall.m">[matlab]</a>
                            /解答[excel], 
                                <a href="kiso/freefall_ans.py">[python]</a>,
                                <a href="kiso/freefall_ans.m">[matlab]</a>
                        </li>
                        <li>
                            <a href="kiso/01_ODEb.pdf">常微分方程式の時間積分（発展）</a>
                        </li>
                        <li><a href="kiso/02_Advection.pdf">1次元移流方程式（差分法）</a>
                            ：演習用
                                <a href="kiso/Advection_upwind.py">[python]</a>, 
                                <a href="kiso/Advection_upwind.m">[matlab]</a>
                            /解答
                                <a href="kiso/Advection_upwind_ans.py">[python]</a>,
                                <a href="kiso/Advection_upwind_ans.m">[matlab]</a>
                        </li>
                        <li><a href="kiso/03_Diffusion.pdf">1次元拡散方程式（陽解法・FVM）</a>
                            ：演習用
                            <a href="kiso/diffusion1d.py">[python]</a>,
                            <a href="kiso/Diffusion1D.m">[matlab]</a>
                            /解答
                            <a href="kiso/diffusion1d_ans.py">[python]</a>,
                            <a href="kiso/Diffusion1D_ans.m">[matlab]</a></li>
                        <li><a href="kiso/05_Gif.pdf">Gifアニメーションを作る（ImageMagick）</a></li>
                        <!--<li><a href="kiso/04_intro2ReservoirSim.pdf">貯留層解析イントロ</a></li>             -->
                    </ul>
                    </div>
                    
                    <!--油層シミュレーション-->
                    
                    <h3>
                        2-3.貯留層解析基礎
                    </h3>
                    <!--
                    このセクションでは，実践的なプログラミングに不可欠なテクニック（疎行列・関数プログラミング）がメインテーマ。またIMPES法の実装を通じて貯留層シミュレーションに興味関心を持ってもらえれば最高。
                    IMPES法の実装までで，4h~6hは必要（Buckley-Leverettを説明するには+1.5h）と感じている。
                    また，教える側はBuckley-Leverret理論や非線形方程式ついて知識がある事が望ましいと思う。
                    -->
                    <p>発展編の資料をまとめたzipは<a><b><u><font color="#ff4500">こちら</font></u></b></a></p>
                    
                    <h4>2-3-1.前提知識の復習とやや高度なプログラミング技術</h4>
                    <ul>
                        <li>numpy & scipy</li>
                        <li>1次元圧力拡散方程式（陰解法）：
                            説明用<a href="kiso/04_Diffusion_Imp.pdf">[pdf]</a>,<a href="hatten/Pressure1D_Implicit.html">[html]</a>
                             / 演習用<a href="hatten/Pressure1D_Implicit.ipynb">[ipynb]</a></li>
                        
                        <li>疎行列：説明用<a href="hatten/SparseMatrix.html">[html]</a> / 演習用<a href="hatten/SparseMatrix.ipynb">[ipynb]</a></li>

                        <li>相対浸透率：説明用<a href="hatten/RelPerm.html">[html]</a>, <a href="hatten/RelPerm.pdf">[pdf]</a> / 演習用<a href="hatten/RelPerm.ipynb">[ipynb]</a></li>
                        <li>関数プログラミング：<a href="hatten/CodingWithFunctions.pdf">[pdf]</a> / <a href="hatten/FunctionProgram/Exercise_Func.zip">[zip]</a></li>
                    </ul>
                    
                    <h4>2-3-2.IMPES法による水油2相流の解析</h4>
                    
                    <ul>
                        <li>石油開発の流れ<a href = "hatten/OilDevelopmentFlow.pdf">[pdf]</a></li>
                        <li>IMPES法
                            <ul>
                                <li>水油2相流れ：<a href="hatten/WaterOil2PhaseFlow.pdf">[pdf]</a>, <a href="hatten/WaterOil2PhaseFlow_Distribution.pptx">[pptx]</a>
                                    <ul>
                                        <li>Buckeley-Leverett理論</li>
                                    </ul>
                                </li>
                                <li><a>課題設定</a>と<a>支配方程式の導出</a></li><!--引継ぎ時にはホワイトボードに書いて説明する資料を作ってる時間がない-->
                                <li>理論とアルゴリズム：<a href="hatten/IMPES_Method.html">[html]</a></li>
                                <li>IMPES法実装：<s>[pdf]</s>,<a href="hatten/IMPES/IMPES.zip">[zip]</a></li>
                            </ul>
                        </li>
                        <li>実践プロジェクト，易動度に関する考察：説明用<a href="hatten/MobilityRatio.pdf">[pdf]</a>,解答解説<a href="hatten/MobilityRatio_ans.pptx">[pptx]</a></li>
                    </ul>    

                    <h4>2-3-3.その他補足説明</h4>
                    <ul>
                        <li>誤差について</li>
                        <p>打切り誤差，桁落ち等の誤差は数値解析において非常に重要だが，本講座ではプログラミングになれてもらう事を優先したため，解説しなかった。しかし，自ら数値解析コードを作成する際，誤差に関連した知識は
                            <b><font color="red">必須</font></b>である。</p>
                        <li><a href="hatten/LinearAndNonlinear.pdf">線形と非線形，Newton法</a></li>
                        <li>地熱貯留層の水蒸気二相流シミュレーション</li>
                        <p>
                        水と蒸気は化学式で表せばどちらもH<sub>2</sub>Oとなり，同一の物質と言える。実際の地熱貯留層でも生産・還元にともない，水が蒸気に，蒸気が水に変化することはよくある。
                        その為，地熱貯留層の二相流解析には，質量保存則に加えて，エネルギー保存則も考慮し，流体の相状態を算出しなければならない。エネルギー保存則は温度に注目する方法と（比）エンタルピーに注目する方法がある。
                        TOUGHは前者を実装しており，Hydrothermは後者を実装している。</p>
                        
                        <li>坑井試験解析</li>
                        <ul>
                            <li>坑井モデル</li>
                            <li>ドローダウン試験：説明用[pdf],演習<a href="hatten/WellTest/drawdownDataset_exercise.xlsx">[xlsx]</a></li>
                            <li>ビルドアップ試験：説明用[pdf],演習<a href="hatten/WellTest/PseudoData_BULogLog_exercise.xlsx">[xlsx]</a></li>
                            <li>log-logプロット：説明用[pdf],演習</li>
                        </ul>
                    </ul>
                </div>
                </div>
            <a href="#supp_exp" style="color: red;">資料の訂正・補足はこちら</a>
   

            <!--補足はじまり-->
            <h2 style="border-bottom: solid rgb(0, 61, 111);">
                雑記
            </h2>
            終了後に気づいたことを書いておきます。
                <!--進め方について-->
                <div style="padding-bottom: 5px;">
                    <h3>
                        事前準備
                    </h3>
                    <ul>
                        <li>説明を始める前に、各自のプログラミング環境を確認すべきだった。</li>
                        <li>URLを変更して解答をダウンロードする方法は上手くいかない場合もある（原因不明）</li>
                    </ul>

                <!--進め方について-->
                <div style="padding-bottom: 5px;">
                    <h3>
                        進め方
                    </h3>
                    <ul>
                        <li>2日間、計6時間程度の予定だったが、足りなかった。</li>
                        <li>資料すべてを説明して、陰解法の演習までこなすには9時間程度必要？</li>
                        <li>陰解法の説明・演習を3日目に行えば適切な時間配分になったはず。</li>
                        <li>アニメーション作成について、コマンドプロンプトではなく、Windows Power Shellを使った説明の方が便利だった。</li>
                        <li>時間がなく、急遽「移流方程式→拡散方程式・陽解法→アニメーション作成」の順番に変更したが、陽解法→陰解法とプログラム作成が連続せず、結果としてよりよいものになったと思う。</li>
                    </ul>
                
                <!--資料訂正-->
                <div style="padding-bottom: 5px;">
                    <h3  id="supp_exp">
                        資料の訂正と補足
                    </h3>
                    <ul>
                        <li>1次元拡散方程式の資料で"発散定理"と表記されている定理は、正しくは"ストークスの定理"でした。(2022.04.08)</li>
                        <li>3重積分が2重積分に置き換わるのが発散定理です。</li>
                    </ul>

            
            <!--コンテンツ終わり-->
        </main>
        
    </body>
</html>